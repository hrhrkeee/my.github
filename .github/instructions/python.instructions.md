<!-- ============================================================
  .github/instructions/python.instructions.md
  ============================================================
  【このファイルの役割】
  Pythonファイル（*.py）に対して自動適用されるパス固有のインストラクション。
  applyTo のglobパターンにマッチするファイルを編集・生成する際に
  この指示がプロンプトに自動的に含まれる。

  【何を記載するか】
  - Python固有のコーディング規約
  - 使用するライブラリやフレームワークのベストプラクティス
  - エラーハンドリングやロギングのパターン
  - パッケージ管理の方針

  【AIへの影響】
  - applyTo のパターンに一致するファイルの作成・編集時にのみ自動適用
  - copilot-instructions.md と併用され、両方の指示が適用される

  【ヘッダー（フロントマター）の設定項目】
  - applyTo: 指示を適用するファイルのglobパターン
  - description: 指示ファイルの簡単な説明
  ============================================================ -->
---
applyTo: "**/*.py"
description: "Pythonスクリプトに適用されるコーディング規約とML開発ガイドライン"
---

# Python コーディングガイドライン

## 基本ルール

- コメントは日本語で記載する
- 変数名・関数名は snake_case、クラス名は PascalCase（PEP 8準拠）
- インデントはスペース4つ
- 型ヒントを積極的に使用する
- docstring は Google スタイルで記載する

## インポート順序

1. 標準ライブラリ（os, sys, pathlib など）
2. サードパーティライブラリ（torch, numpy, pandas など）
3. プロジェクト内モジュール（src, util など）

各グループ間は空行で区切る。

## パッケージ管理

- パッケージ追加は `uv add <パッケージ名>` を使う
- 開発専用パッケージは `uv add --dev <パッケージ名>` を使う
- `uv pip install` は原則使用しない（pyproject.toml に記録されず再現性が損なわれるため）
- スクリプトの実行は `uv run python <スクリプト>` で行う

## エラーハンドリング

- モデルの学習・推論では、チェックポイントの保存前後で例外をキャッチする
- ファイルI/Oでは pathlib.Path を使用する
- GPU関連の処理では torch.cuda.is_available() を確認する

## ロギング

- print() ではなく logging モジュールを使用する
- ログレベルは DEBUG / INFO / WARNING / ERROR を適切に使い分ける

## 出力ファイル

- output/ 直下にファイルを出力しない
- 実行ごとに `YYYYMMDD-hhmmss_[task名]/` サブフォルダを作成して出力する
- 出力先パスの生成にはユーティリティ関数を使用する

## テスト

- テストは test/ ディレクトリに配置する
- テストファイル名は test_ プレフィックスを付ける
- pytest を使用し、`uv run pytest test/` で実行する
